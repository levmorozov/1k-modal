!function(e){"use strict";function i(){return l.length?l[l.length-1]:null}var n,o=document,c=e(o.documentElement),l=[];e.m1k=function(t,d){var s=e(t);e.extend(this,e.fn.m1k.defaults,d,s.data(),{el:s});var a=this,r='<div class=": :-hide"><div class=":-content">';if(a.close&&(r+='<div class=":-close" aria-label="Close">'+a.close+"</div>"),r+="</div></div>",a.b=e(r.replace(/:/g,a.id)).clone(),a.single)for(;i();)i()._c();void 0===n&&(n=e('<div class="'+a.id+'-root"></div>'),e("body").append(n)),l.push(a),c.addClass("with-"+a.id),a._pa=o.activeElement,a._pa.blur&&a._pa.blur(),a.el.show(),a.b.find("."+a.id+"-content").append(a.el),a.b.removeClass(a.id+"-hide").on("click."+a.id,function(i){var n=e(i.target);a.clickClose&&n.is("."+a.id)&&a._c()}).find("."+a.id+"-close").click(function(){return a._c(),!1}),n.append(a.b),e(o).off("keydown."+a.id).on("keydown."+a.id,function(e){var n=i();27===e.which&&n.escClose&&n._c()}),a.el.trigger(a.id+":open",[a,a.el])},e.m1k.prototype={constructor:e.m1k,id:"m1k",single:!0,escClose:!0,clickClose:!0,close:"x",_c:function(){l.pop();var n=this;n.el.hide().appendTo(e("body")),n.b.remove(),n.b=null,n._pa.focus(),i()||(c.removeClass("with-"+n.id),e(o).off("keydown."+n.id)),n.el.trigger(n.id+":close",n)}},e.m1k.close=function(){var e=i();e&&e._c()},e.fn.m1k=function(i){return 1===this.length&&new e.m1k(this,i),this}}(jQuery);